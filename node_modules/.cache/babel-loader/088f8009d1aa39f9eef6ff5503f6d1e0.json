{"ast":null,"code":"import _objectSpread from\"/Users/symbat.askarova33gmail.com/Desktop/program-js/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import axios from'axios';import Cookies from'universal-cookie';import{TRY_SIGN_IN,SIGN_IN,LOG_OUT}from'../actions/actions';var cookies=new Cookies();var initialState={token:cookies.get('token'),user:'',isLoading:true,isAuth:false};// eslint-disable-next-line import/no-anonymous-default-export\nexport default(function(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case SIGN_IN:return _objectSpread(_objectSpread({},state),{},{user:action.user,token:action.token,isLoading:action.isLoading,isAuth:action.isAuth});case TRY_SIGN_IN:return _objectSpread(_objectSpread({},state),{},{user:action.user,token:action.token,isLoading:action.isLoading,isAuth:action.isAuth});case LOG_OUT:return _objectSpread(_objectSpread({},state),{},{user:'',token:'',isAuth:false});case'FAILED_LOAD':return _objectSpread(_objectSpread({},state),{},{isLoading:false});default:return state;}});export function trySignIn(){return function(dispatch){axios.get('/api/v1/signin').then(function(_ref){var data=_ref.data;dispatch({type:TRY_SIGN_IN,user:data.user,token:data.token,isLoading:false,isAuth:true});});};}export function signIn(userInformation){return function(dispatch){axios.post('/api/v1/signin',userInformation).then(function(_ref2){var data=_ref2.data;dispatch({type:SIGN_IN,user:data.user,token:data.token,isLoading:false,isAuth:true});}).catch(function(err){return console.log(err);});};}export function logOut(){return function(dispatch){cookies.remove('token');dispatch({type:LOG_OUT});};}","map":{"version":3,"sources":["/Users/symbat.askarova33gmail.com/Desktop/program-js/src/client/redux/reducers/sign.js"],"names":["axios","Cookies","TRY_SIGN_IN","SIGN_IN","LOG_OUT","cookies","initialState","token","get","user","isLoading","isAuth","state","action","type","trySignIn","dispatch","then","data","signIn","userInformation","post","catch","err","console","log","logOut","remove"],"mappings":"yIAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,OAAP,KAAoB,kBAApB,CACA,OAAQC,WAAR,CAAqBC,OAArB,CAA8BC,OAA9B,KAA4C,oBAA5C,CAEA,GAAMC,CAAAA,OAAO,CAAG,GAAIJ,CAAAA,OAAJ,EAAhB,CAEA,GAAMK,CAAAA,YAAY,CAAG,CACnBC,KAAK,CAAEF,OAAO,CAACG,GAAR,CAAY,OAAZ,CADY,CAEnBC,IAAI,CAAE,EAFa,CAGnBC,SAAS,CAAE,IAHQ,CAInBC,MAAM,CAAG,KAJU,CAArB,CAMA;AACA,eAAe,UAAkC,IAAjCC,CAAAA,KAAiC,2DAAzBN,YAAyB,IAAXO,CAAAA,MAAW,2CAC/C,OAAQA,MAAM,CAACC,IAAf,EACE,IAAKX,CAAAA,OAAL,CACE,sCAAWS,KAAX,MAAkBH,IAAI,CAAEI,MAAM,CAACJ,IAA/B,CAAqCF,KAAK,CAAEM,MAAM,CAACN,KAAnD,CAA0DG,SAAS,CAAEG,MAAM,CAACH,SAA5E,CAAuFC,MAAM,CAACE,MAAM,CAACF,MAArG,GACF,IAAKT,CAAAA,WAAL,CACE,sCAAWU,KAAX,MAAkBH,IAAI,CAAEI,MAAM,CAACJ,IAA/B,CAAqCF,KAAK,CAAEM,MAAM,CAACN,KAAnD,CAA0DG,SAAS,CAAEG,MAAM,CAACH,SAA5E,CAAuFC,MAAM,CAAEE,MAAM,CAACF,MAAtG,GACF,IAAKP,CAAAA,OAAL,CACE,sCAAWQ,KAAX,MAAkBH,IAAI,CAAE,EAAxB,CAA4BF,KAAK,CAAE,EAAnC,CAAuCI,MAAM,CAAE,KAA/C,GACF,IAAK,aAAL,CACE,sCAAWC,KAAX,MAAkBF,SAAS,CAAE,KAA7B,GACF,QACE,MAAOE,CAAAA,KAAP,CAVJ,CAYD,CAbD,EAeA,MAAO,SAASG,CAAAA,SAAT,EAAqB,CAC1B,MAAO,UAACC,QAAD,CAAc,CACnBhB,KAAK,CAACQ,GAAN,CAAU,gBAAV,EAA4BS,IAA5B,CAAiC,cAAY,IAAVC,CAAAA,IAAU,MAAVA,IAAU,CAC3CF,QAAQ,CAAC,CACPF,IAAI,CAAEZ,WADC,CAEPO,IAAI,CAAES,IAAI,CAACT,IAFJ,CAGPF,KAAK,CAAEW,IAAI,CAACX,KAHL,CAIPG,SAAS,CAAE,KAJJ,CAKPC,MAAM,CAAE,IALD,CAAD,CAAR,CAOD,CARD,EASD,CAVD,CAWD,CAED,MAAO,SAASQ,CAAAA,MAAT,CAAgBC,eAAhB,CAAiC,CACtC,MAAO,UAACJ,QAAD,CAAc,CACnBhB,KAAK,CAACqB,IAAN,CAAW,gBAAX,CAA6BD,eAA7B,EAA8CH,IAA9C,CAAmD,eAAY,IAAVC,CAAAA,IAAU,OAAVA,IAAU,CAC7DF,QAAQ,CAAC,CACPF,IAAI,CAAEX,OADC,CAEPM,IAAI,CAAES,IAAI,CAACT,IAFJ,CAGPF,KAAK,CAAEW,IAAI,CAACX,KAHL,CAIPG,SAAS,CAAE,KAJJ,CAKPC,MAAM,CAAE,IALD,CAAD,CAAR,CAOD,CARD,EAQGW,KARH,CAQS,SAACC,GAAD,QAAQC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAR,EART,EASD,CAVD,CAWD,CAED,MAAO,SAASG,CAAAA,MAAT,EAAkB,CACvB,MAAO,UAACV,QAAD,CAAc,CACnBX,OAAO,CAACsB,MAAR,CAAe,OAAf,EACAX,QAAQ,CAAC,CAACF,IAAI,CAAEV,OAAP,CAAD,CAAR,CACD,CAHD,CAID","sourcesContent":["import axios from 'axios'\r\nimport Cookies from 'universal-cookie'\r\nimport {TRY_SIGN_IN, SIGN_IN, LOG_OUT} from '../actions/actions'\r\n\r\nconst cookies = new Cookies()\r\n\r\nconst initialState = {\r\n  token: cookies.get('token'),\r\n  user: '',\r\n  isLoading: true,\r\n  isAuth : false\r\n}\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SIGN_IN:\r\n      return {...state, user: action.user, token: action.token, isLoading: action.isLoading, isAuth:action.isAuth}\r\n    case TRY_SIGN_IN:\r\n      return {...state, user: action.user, token: action.token, isLoading: action.isLoading, isAuth: action.isAuth}\r\n    case LOG_OUT:\r\n      return {...state, user: '', token: '', isAuth: false}\r\n    case 'FAILED_LOAD':\r\n      return {...state, isLoading: false}\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport function trySignIn() {\r\n  return (dispatch) => {\r\n    axios.get('/api/v1/signin').then(({data}) => {\r\n      dispatch({\r\n        type: TRY_SIGN_IN,\r\n        user: data.user,\r\n        token: data.token,\r\n        isLoading: false,\r\n        isAuth: true\r\n      })\r\n    })\r\n  }\r\n}\r\n\r\nexport function signIn(userInformation) {\r\n  return (dispatch) => {\r\n    axios.post('/api/v1/signin', userInformation).then(({data}) => {\r\n      dispatch({\r\n        type: SIGN_IN,\r\n        user: data.user,\r\n        token: data.token,\r\n        isLoading: false,\r\n        isAuth: true\r\n      })\r\n    }).catch((err)=> console.log(err))\r\n  }\r\n}\r\n\r\nexport function logOut() {\r\n  return (dispatch) => {\r\n    cookies.remove('token')\r\n    dispatch({type: LOG_OUT})\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}