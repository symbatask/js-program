{"ast":null,"code":"var _jsxFileName = \"/Users/symbat.askarova33gmail.com/Desktop/program-js/src/client/StartUp.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect } from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { trySignIn } from \"./redux/reducers/sign\";\nimport { history } from './redux';\nimport Login from \"./scenes/Login\";\nimport { getUsers } from \"./redux/reducers/user\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst StartUp = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const dispatch = useDispatch();\n  const token = useSelector(s => s.signIn.token);\n  const user = useSelector(s => s.signIn.user);\n  useEffect(() => {\n    if (token) {\n      dispatch(trySignIn());\n    } else {\n      history.push('/login');\n      dispatch({\n        type: 'FAILED_LOAD'\n      });\n    } // eslint-disable-next-line\n\n  }, []);\n  useEffect(() => {\n    if (!!token && !!user) {\n      dispatch(getUsers());\n    }\n  }, [dispatch, token, user]);\n  return !!token && !!user ? children : /*#__PURE__*/_jsxDEV(Login, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 44\n  }, this);\n};\n\n_s(StartUp, \"hc+JnogMq/JrBqlHAKb+5KJFEc0=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c = StartUp;\nexport default StartUp;\n\nvar _c;\n\n$RefreshReg$(_c, \"StartUp\");","map":{"version":3,"sources":["/Users/symbat.askarova33gmail.com/Desktop/program-js/src/client/StartUp.js"],"names":["useEffect","useDispatch","useSelector","trySignIn","history","Login","getUsers","StartUp","children","dispatch","token","s","signIn","user","push","type"],"mappings":";;;AAAA,SAASA,SAAT,QAA0B,OAA1B;AACA,SAAQC,WAAR,EAAqBC,WAArB,QAAuC,aAAvC;AACA,SAAQC,SAAR,QAAwB,uBAAxB;AACA,SAASC,OAAT,QAAwB,SAAxB;AACA,OAAOC,KAAP,MAAkB,gBAAlB;AACA,SAAQC,QAAR,QAAuB,uBAAvB;;;AAGA,MAAMC,OAAO,GAAG,QAAgB;AAAA;;AAAA,MAAf;AAACC,IAAAA;AAAD,GAAe;AAC9B,QAAMC,QAAQ,GAAGR,WAAW,EAA5B;AACA,QAAMS,KAAK,GAAGR,WAAW,CAAES,CAAD,IAAOA,CAAC,CAACC,MAAF,CAASF,KAAjB,CAAzB;AACA,QAAMG,IAAI,GAAGX,WAAW,CAAES,CAAD,IAAOA,CAAC,CAACC,MAAF,CAASC,IAAjB,CAAxB;AACAb,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIU,KAAJ,EAAW;AACTD,MAAAA,QAAQ,CAACN,SAAS,EAAV,CAAR;AACD,KAFD,MAEO;AACHC,MAAAA,OAAO,CAACU,IAAR,CAAa,QAAb;AACFL,MAAAA,QAAQ,CAAC;AAAEM,QAAAA,IAAI,EAAE;AAAR,OAAD,CAAR;AACD,KANa,CAOhB;;AACC,GARQ,EAQN,EARM,CAAT;AAUAf,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI,CAAC,CAACU,KAAF,IAAW,CAAC,CAACG,IAAjB,EAAuB;AACrBJ,MAAAA,QAAQ,CAACH,QAAQ,EAAT,CAAR;AACD;AACF,GAJQ,EAIN,CAACG,QAAD,EAAWC,KAAX,EAAkBG,IAAlB,CAJM,CAAT;AAOA,SAAQ,CAAC,CAACH,KAAF,IAAW,CAAC,CAACG,IAAd,GAAuBL,QAAvB,gBAAkC,QAAC,KAAD;AAAA;AAAA;AAAA;AAAA,UAAzC;AACD,CAtBD;;GAAMD,O;UACaN,W,EACHC,W,EACDA,W;;;KAHTK,O;AAwBN,eAAeA,OAAf","sourcesContent":["import { useEffect } from 'react'\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {trySignIn} from \"./redux/reducers/sign\";\r\nimport { history } from './redux'\r\nimport Login from \"./scenes/Login\";\r\nimport {getUsers} from \"./redux/reducers/user\";\r\n\r\n\r\nconst StartUp = ({children}) => {\r\n  const dispatch = useDispatch()\r\n  const token = useSelector((s) => s.signIn.token)\r\n  const user = useSelector((s) => s.signIn.user)\r\n  useEffect(() => {\r\n    if (token) {\r\n      dispatch(trySignIn())\r\n    } else {\r\n        history.push('/login')\r\n      dispatch({ type: 'FAILED_LOAD' })\r\n    }\r\n  // eslint-disable-next-line\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (!!token && !!user) {\r\n      dispatch(getUsers())\r\n    }\r\n  }, [dispatch, token, user])\r\n\r\n\r\n  return (!!token && !!user ) ? children : <Login />\r\n}\r\n\r\nexport default StartUp"]},"metadata":{},"sourceType":"module"}