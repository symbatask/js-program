{"ast":null,"code":"import{useEffect}from'react';import{useDispatch,useSelector}from\"react-redux\";import{trySignIn}from\"./redux/reducers/sign\";import{history}from'./redux';import Login from\"./scenes/Login\";import{getUsers}from\"./redux/reducers/user\";import{jsx as _jsx}from\"react/jsx-runtime\";var StartUp=function StartUp(_ref){var children=_ref.children;var dispatch=useDispatch();var token=useSelector(function(s){return s.signIn.token;});var user=useSelector(function(s){return s.signIn.user;});useEffect(function(){if(token){dispatch(trySignIn());}else{history.push('/login');dispatch({type:'FAILED_LOAD'});}// eslint-disable-next-line\n},[]);useEffect(function(){if(!!token&&!!user){dispatch(getUsers());}},[dispatch,token,user]);return!!token&&!!user?children:/*#__PURE__*/_jsx(Login,{});};export default StartUp;","map":{"version":3,"sources":["/Users/symbat.askarova33gmail.com/Desktop/program-js/src/client/StartUp.js"],"names":["useEffect","useDispatch","useSelector","trySignIn","history","Login","getUsers","StartUp","children","dispatch","token","s","signIn","user","push","type"],"mappings":"AAAA,OAASA,SAAT,KAA0B,OAA1B,CACA,OAAQC,WAAR,CAAqBC,WAArB,KAAuC,aAAvC,CACA,OAAQC,SAAR,KAAwB,uBAAxB,CACA,OAASC,OAAT,KAAwB,SAAxB,CACA,MAAOC,CAAAA,KAAP,KAAkB,gBAAlB,CACA,OAAQC,QAAR,KAAuB,uBAAvB,C,2CAGA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,MAAgB,IAAdC,CAAAA,QAAc,MAAdA,QAAc,CAC9B,GAAMC,CAAAA,QAAQ,CAAGR,WAAW,EAA5B,CACA,GAAMS,CAAAA,KAAK,CAAGR,WAAW,CAAC,SAACS,CAAD,QAAOA,CAAAA,CAAC,CAACC,MAAF,CAASF,KAAhB,EAAD,CAAzB,CACA,GAAMG,CAAAA,IAAI,CAAGX,WAAW,CAAC,SAACS,CAAD,QAAOA,CAAAA,CAAC,CAACC,MAAF,CAASC,IAAhB,EAAD,CAAxB,CACAb,SAAS,CAAC,UAAM,CACd,GAAIU,KAAJ,CAAW,CACTD,QAAQ,CAACN,SAAS,EAAV,CAAR,CACD,CAFD,IAEO,CACHC,OAAO,CAACU,IAAR,CAAa,QAAb,EACFL,QAAQ,CAAC,CAAEM,IAAI,CAAE,aAAR,CAAD,CAAR,CACD,CACH;AACC,CARQ,CAQN,EARM,CAAT,CAUAf,SAAS,CAAC,UAAM,CACd,GAAI,CAAC,CAACU,KAAF,EAAW,CAAC,CAACG,IAAjB,CAAuB,CACrBJ,QAAQ,CAACH,QAAQ,EAAT,CAAR,CACD,CACF,CAJQ,CAIN,CAACG,QAAD,CAAWC,KAAX,CAAkBG,IAAlB,CAJM,CAAT,CAOA,MAAQ,CAAC,CAACH,KAAF,EAAW,CAAC,CAACG,IAAd,CAAuBL,QAAvB,cAAkC,KAAC,KAAD,IAAzC,CACD,CAtBD,CAwBA,cAAeD,CAAAA,OAAf","sourcesContent":["import { useEffect } from 'react'\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {trySignIn} from \"./redux/reducers/sign\";\r\nimport { history } from './redux'\r\nimport Login from \"./scenes/Login\";\r\nimport {getUsers} from \"./redux/reducers/user\";\r\n\r\n\r\nconst StartUp = ({children}) => {\r\n  const dispatch = useDispatch()\r\n  const token = useSelector((s) => s.signIn.token)\r\n  const user = useSelector((s) => s.signIn.user)\r\n  useEffect(() => {\r\n    if (token) {\r\n      dispatch(trySignIn())\r\n    } else {\r\n        history.push('/login')\r\n      dispatch({ type: 'FAILED_LOAD' })\r\n    }\r\n  // eslint-disable-next-line\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (!!token && !!user) {\r\n      dispatch(getUsers())\r\n    }\r\n  }, [dispatch, token, user])\r\n\r\n\r\n  return (!!token && !!user ) ? children : <Login />\r\n}\r\n\r\nexport default StartUp"]},"metadata":{},"sourceType":"module"}