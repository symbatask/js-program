{"ast":null,"code":"import _slicedToArray from\"/Users/symbat.askarova33gmail.com/Desktop/program-js/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from\"react-redux\";import{useParams}from\"react-router-dom\";import{getTasks,getWeeks}from\"../../redux/reducers/weeks\";import{history}from'../../redux';import'../../../assets/css/markdown.scss';import'./lesson.scss';import Head from\"../../components/Head\";import MarkdownToHtml from\"../../components/MarkdownToHtml\";import LinksHistory from\"../../components/LinksHistory/LinksHistory\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Lesson=function Lesson(){var tasks=useSelector(function(s){return s.weeks.tasks;});var weeks=useSelector(function(s){return s.weeks.weeks;});var _useState=useState({}),_useState2=_slicedToArray(_useState,2),currentTask=_useState2[0],setCurrentTask=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),prevTask=_useState4[0],setPrevTask=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),nextTask=_useState6[0],setNextTask=_useState6[1];var _useState7=useState('### Almost ready...'),_useState8=_slicedToArray(_useState7,2),content=_useState8[0],setContent=_useState8[1];var _useParams=useParams(),weekId=_useParams.weekId,taskId=_useParams.taskId;var dispatch=useDispatch();// add scroll to element\nvar lessonRef=/*#__PURE__*/React.createRef();var handleClick=function handleClick(){return lessonRef.current.scrollIntoView({behavior:'smooth',block:'start'});};// END add scroll to element\nuseEffect(function(){if(tasks.length<=0){dispatch(getTasks(weekId,taskId));}else{setCurrentTask(tasks.find(function(el){return el.date===+taskId;}));setPrevTask(tasks[tasks.findIndex(function(el){return el.date===+taskId;})-1]);setNextTask(tasks[tasks.findIndex(function(el){return el.date===+taskId;})+1]);setContent(tasks.find(function(el){return el.date===+taskId;}).content);}},[dispatch,taskId,tasks,weekId]);useEffect(function(){if(weeks.length<=0)dispatch(getWeeks());},[dispatch,weeks.length]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Head,{title:\"Lesson\"}),weekId&&/*#__PURE__*/_jsx(LinksHistory,{weekId:weekId,currentTask:currentTask}),/*#__PURE__*/_jsxs(\"section\",{className:\"lesson\",ref:lessonRef,children:[/*#__PURE__*/_jsx(\"h2\",{className:\"lesson__title\",children:currentTask.name}),/*#__PURE__*/_jsx(MarkdownToHtml,{content:content}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"inline-flex\",children:[prevTask&&/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){history.push(\"/education/\".concat(weekId,\"/\").concat(prevTask.date));handleClick();},className:\"bg-gray-400 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-l\",children:\"Prev\"}),nextTask&&/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){history.push(\"/education/\".concat(weekId,\"/\").concat(nextTask.date));handleClick();},className:\"bg-gray-400 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-r\",children:\"Next\"})]})})]})]});};export default Lesson;","map":{"version":3,"sources":["/Users/symbat.askarova33gmail.com/Desktop/program-js/src/client/scenes/Lesson/Lesson.js"],"names":["React","useEffect","useState","useDispatch","useSelector","useParams","getTasks","getWeeks","history","Head","MarkdownToHtml","LinksHistory","Lesson","tasks","s","weeks","currentTask","setCurrentTask","prevTask","setPrevTask","nextTask","setNextTask","content","setContent","weekId","taskId","dispatch","lessonRef","createRef","handleClick","current","scrollIntoView","behavior","block","length","find","el","date","findIndex","name","push"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react'\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {useParams} from \"react-router-dom\";\r\nimport {getTasks, getWeeks} from \"../../redux/reducers/weeks\";\r\nimport {history} from '../../redux'\r\nimport '../../../assets/css/markdown.scss'\r\nimport './lesson.scss'\r\nimport Head from \"../../components/Head\";\r\nimport MarkdownToHtml from \"../../components/MarkdownToHtml\";\r\nimport LinksHistory from \"../../components/LinksHistory/LinksHistory\";\r\n\r\nconst Lesson = () => {\r\n  const tasks = useSelector((s) => s.weeks.tasks)\r\n  const weeks = useSelector((s) => s.weeks.weeks)\r\n  const [currentTask, setCurrentTask] = useState({})\r\n  const [prevTask, setPrevTask] = useState('')\r\n  const [nextTask, setNextTask] = useState('')\r\n  const [content, setContent] = useState('### Almost ready...')\r\n  const {weekId, taskId} = useParams()\r\n  const dispatch = useDispatch()\r\n\r\n\r\n  // add scroll to element\r\n\r\n  const lessonRef = React.createRef();\r\n\r\n  const handleClick = () =>\r\n    lessonRef.current.scrollIntoView({\r\n      behavior: 'smooth',\r\n      block: 'start',\r\n    });\r\n\r\n  // END add scroll to element\r\n\r\n\r\n  useEffect(() => {\r\n    if (tasks.length <= 0) {\r\n      dispatch(getTasks(weekId, taskId))\r\n    } else {\r\n      setCurrentTask(tasks.find((el) => el.date === +taskId))\r\n      setPrevTask(tasks[tasks.findIndex((el) => el.date === +taskId) - 1])\r\n      setNextTask(tasks[tasks.findIndex((el) => el.date === +taskId) + 1])\r\n      setContent(tasks.find((el) => el.date === +taskId).content)\r\n    }\r\n  }, [dispatch, taskId, tasks, weekId])\r\n\r\n  useEffect(() => {\r\n    if (weeks.length <= 0)\r\n      dispatch(getWeeks())\r\n  }, [dispatch, weeks.length])\r\n\r\n  return (\r\n    <>\r\n      <Head title=\"Lesson\">\r\n      </Head>\r\n      {weekId && <LinksHistory weekId={weekId} currentTask={currentTask}/>}\r\n      <section className=\"lesson\" ref={lessonRef}>\r\n        <h2 className=\"lesson__title\">{currentTask.name}</h2>\r\n        <MarkdownToHtml content={content}/>\r\n        <div className=\"mb-5\">\r\n          <div className=\"inline-flex\">\r\n            {prevTask &&\r\n            <button\r\n              onClick={() => {\r\n                history.push(`/education/${weekId}/${prevTask.date}`)\r\n                handleClick()\r\n              }}\r\n              className=\"bg-gray-400 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-l\">\r\n              Prev\r\n            </button>\r\n            }\r\n            {nextTask &&\r\n            <button\r\n              onClick={() => {history.push(`/education/${weekId}/${nextTask.date}`)\r\n                handleClick()\r\n              }}\r\n              className=\"bg-gray-400 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-r\">\r\n              Next\r\n            </button>\r\n            }\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </>\r\n  )\r\n\r\n}\r\nexport default Lesson"]},"metadata":{},"sourceType":"module"}